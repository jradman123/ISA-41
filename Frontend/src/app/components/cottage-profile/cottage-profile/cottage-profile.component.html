<div class="container">

    <br /><br /><br />
    <h1 style="color:blue;">Cottage {{this.cottage.name}}</h1>
    <mat-tab-group>
        <mat-tab style="overflow-y: hidden!important;" label="Basic info">
            <mat-card style="width:500px">
                <mat-card-title></mat-card-title>
                <mat-card-content>
                    <form class="form-container" [formGroup]="detailsForm" style="width:1000px">
                        <div class="row">
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Name of cottage</mat-label>
                                    <input matInput placeholder="Name of adventure" formControlName="name"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Price in euro</mat-label>
                                    <input matInput placeholder="Price in euro" formControlName="price"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Street name</mat-label>
                                    <input matInput placeholder="Street name" formControlName="streetName"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Street number</mat-label>
                                    <input matInput placeholder="Street number" formControlName="streetNumber"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>City</mat-label>
                                    <input matInput placeholder="City" formControlName="city" [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Country</mat-label>
                                    <input matInput placeholder="Country" formControlName="country"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Guest limit</mat-label>
                                    <input matInput placeholder="Guest limit" formControlName="numberOfPeople"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>The percentage of the price that is retained</mat-label>
                                    <input matInput placeholder="The percentage of the price that is retained"
                                        [readonly]="!editMode" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm">
                                <mat-form-field appearance="standard">
                                    <mat-label>Description</mat-label>
                                    <textarea matInput placeholder="Description" formControlName="description"
                                        [readonly]="!editMode"> </textarea>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="button-container" *ngIf="!editMode else editIsOn">
                            <button mat-flat-button color="primary" class="button"
                                (click)="editMode = true">Edit</button>
                        </div>
                        <ng-template #editIsOn>
                            <div class="button-container" *ngIf="editMode">
                                <button mat-flat-button color="primary" class="button">Save</button>
                                <button mat-flat-button color="warn" class="button">Cancel</button>
                            </div>
                        </ng-template>
                    </form>
                </mat-card-content>
            </mat-card>

        </mat-tab>
        <mat-tab label="Edit images">
            <div>
                <mat-carousel timings="250ms ease-in" color="primary" maxWidth="auto" maxHeight="auto" [loop]="true"
                    [hideArrows]="false" [hideIndicators]="true" [useKeyboard]="true" [useMouseWheel]="false"
                    orientation="ltr">
                    <mat-carousel-slide style="height: 600px !important;" #matCarouselSlide
                        *ngFor="let image of images; let i = index">
                        <img [src]="image.url" style="height: 400px; width: 1150px;" />
                    </mat-carousel-slide>
                </mat-carousel>
            </div>
            <div style="align-items: center;">
                <br />
                <input style="margin-top: 20px; color:primary;" type="file" #file (change)="onFileSelected($event)" />
            </div>
        </mat-tab>




        <mat-tab label="Edit rules">

            <div class="container" style="margin-top:20px">
                <div class="container">
                    <div class="containter">

                        <h1>Rules of cottage</h1>
                        <hr />
                        <div *ngFor="let rule of rules" class="container">
                            <h3> {{ rule.ruleDescription}} <button style="margin-left:850px" class="btn"
                                    (click)="deleteRule(rule.id)">Delete</button>
                                <hr />
                            </h3>

                        </div>

                    </div>
                </div>

            </div>



            <div class="container" style="margin-top:20px">
                <div class="containter">
                    <div>
                        <h1> Add rule of cottage</h1>
                        <hr />
                        <div>
                            <input class="form-control" type="text" placeholder="Enter your rule"
                                [(ngModel)]="rulee.ruleDescription" />
                        </div>
                    </div>

                </div>
                <div class="container">
                    <div>
                        <button class="btn" (click)="addRule()">Add</button>
                    </div>
                </div>
            </div>
            <br /><br /><br />
        </mat-tab>
        <mat-tab label="Edit utilities">
            <div class="container" style="margin-top:20px">
                <div class="container">
                    <div class="containter">

                        <h1>Utilities of cottage</h1>
                        <hr />
                        <div *ngFor="let utility of utilities" class="containter">
                            <h3> {{ utility.name}} <button style="margin-left:850px" class="btn"
                                    (click)="deleteUtility(utility.id)">Delete</button>
                                <hr />
                            </h3>

                        </div>

                    </div>
                </div>

            </div>



            <div class="container" style="margin-top:20px">
                <div class="containter">
                    <div>
                        <h1> Add utility of cottage</h1>
                        <hr />
                        <div>
                            <input class="form-control" type="text" placeholder="Enter your utility"
                                [(ngModel)]="utilityy.name" />
                        </div>
                    </div>

                </div>
                <div class="container">
                    <div>
                        <button class="btn" (click)="addUtility()">Add</button>
                    </div>
                </div>
            </div>
            <br /><br />
        </mat-tab>
        <mat-tab label="Edit rooms"> Content 3 </mat-tab>
        <mat-tab label="Availability">
            <div class="container" style="margin-top:20px;width:1300px;">
                <div class="container">
                    <div class="containter">

                        <br />
                        <hr />
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Start date</th>
                                    <th>End date</th>
                                    <th></th>
                                </tr>
                            </thead>

                            <tr *ngFor="let availability of availabilities">

                                <td>{{ availability.startDate }}</td>
                                <td>{{ availability.endDate }}</td>
                                <td> <button style="width: 70px;" class="btn">Delete</button>
                                    <hr />
                                </td>
                            </tr>
                        </table>

                    </div>
                </div>

            </div>

            <hr />


            <div class="container" style="margin-top:50px;width: 1000px;">
                <div class="containter">
                    <div>
                        <h1> Add availability of cottage</h1>
                        <hr />
                        <div>
                            <input class="form-control" type="date" placeholder="Enter startDate"
                                [(ngModel)]="startAvailableDate" />
                            <input class="form-control" type="date" placeholder="Enter endDate"
                                [(ngModel)]="endAvailableDate" />
                        </div>
                    </div>

                </div>
                <div class="container">
                    <div>
                        <button class="btn" (click)="addAvailability()">Add</button>
                    </div>
                </div>
                <br />
            </div>

        </mat-tab>


        <mat-tab label="Edit appointments">


            <div class="card-holder" style="margin-left: 15px;margin-top: 30px;">
                <div class="row">
                    <div class="card" style="margin: 10px; " *ngFor="let app of appointments ">



                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong> from {{app.startDate}} to {{app.endDate}}</strong>
                            </li>

                            <li style="height: 70px;" class="list-group-item">{{app.price}} € for {{app.capacity}}
                                person </li>
                            <li style="height: 70px;" class="list-group-item"> Promotion valid until {{app.validUntil}}
                            </li>
                            <li style="height: 70px;" class="list-group-item"> <button
                                    (click)="deleteApp(app.id)">Delete</button>
                            </li>


                        </ul>


                    </div>
                    <div class="container">
                        <div>
                            <button class="btn" (click)="addApp()" style="margin-left: 480px;">Add new
                                appointment</button>
                        </div>
                        <br /><br />
                    </div>
                </div>


            </div>

        </mat-tab>









        <mat-tab label="Add reservation">
            <br />

            <div class="container">

                <form class="form" [formGroup]="form" style="margin-top: 20px;">
                    <mat-form-field appearance="fill" style="width: 90%;margin-left:30px;">
                        <mat-label>Client</mat-label>
                        <mat-select formControlName="clientEmail">
                            <mat-option *ngFor="let user of users" [value]="user.email">
                                {{user.email}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="width: 90%;margin-left:30px;">

                        <mat-label>Start Date</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="resStart" />
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="width: 90%;margin-left:30px;">

                        <mat-label>End Date</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="resEnd" />
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="width: 90%;margin-left:30px;">
                        <mat-label>Number of person</mat-label>
                        <input matInput type="number" min="1" max="{{this.cottage.numberOfPeople}}"
                            placeholder="Number of person" formControlName="numberOfPerson" />
                    </mat-form-field>
                    <mat-form-field appearance="fill" style="width: 90%;margin-left:30px;">
                        <mat-label>Total price</mat-label>
                        <input matInput>{{fullPrice}}
                        <button mat-raised-button style="margin-left: 10px;" click="calcPrice()">Calculate</button>
                    </mat-form-field>


                </form>
                <div class="button-container">
                    <button mat-flat-button color="primary" (click)="reserved()"
                        style="margin-left: 450px;width: 100px;">Add</button>
                </div>
            </div>
            <br />



        </mat-tab>





        <mat-tab label="Reservation history">
            <table *ngIf="reservations.data.length != 0; else emptyTable" mat-table [dataSource]="reservations"
                class="mat-elevation-z8">
                <ng-container matColumnDef="No.">
                    <th mat-header-cell *matHeaderCellDef>No.</th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{ i + 1 }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="StartDate">
                    <th mat-header-cell *matHeaderCellDef>Start date</th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{ element.resStart }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="EndDate">
                    <th mat-header-cell *matHeaderCellDef>End date</th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{element.resEnd }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="Price">
                    <th mat-header-cell *matHeaderCellDef>Price</th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{ element.price }} €
                    </td>
                </ng-container>
                <ng-container matColumnDef="NumberOfPerson">
                    <th mat-header-cell *matHeaderCellDef>
                        Number of person
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{ element.numberOfPerson }} person
                    </td>
                </ng-container>
                <ng-container matColumnDef="ClientEmail">
                    <th mat-header-cell *matHeaderCellDef>Email of client</th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        {{ element.clientEmail }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="Buttons">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <button mat-raised-button color="primary" style="width: 200px; "
                            (click)="viewPersonalData(element.clientEmail)">Some
                            informations of client</button>


                    </td>

                </ng-container>
                <tr mat-header-row *matHeaderRowDef="columnsToDisplayCottageReservations"></tr>
                <tr mat-row *matRowDef="
                            let element;
                            columns: columnsToDisplayCottageReservations
                          "></tr>
            </table>

            <ng-template #emptyTable>
                <br><br><br><br>
                <div class="d-flex justify-content-center ">
                    <mat-card style="background-color: transparent;">No reservations for cottage.</mat-card>
                </div>
            </ng-template>

            <br /><br /><br /><br /> <br /><br /><br /><br />
            <br /><br /><br /><br /> <br /><br /><br /><br />
        </mat-tab>
    </mat-tab-group>
</div>